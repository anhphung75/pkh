{% extends "base.html" %}

{% block js %}
<script src="{{ static_url("js/refs/jsstore.min.js") }}"></script>
<script src="{{ static_url("js/refs/jsstore.worker.min.js") }}"></script>
<script src="{{ static_url("js/hoso/menu.js") }}"></script>
<script src="{{ static_url("js/hoso/app.js") }}" type="module"></script>
{% end %}

{% block menu %}
<div id="menu" class="container h-100 m-0 p-1 col-auto">
  <div class="menu d-flex flex-column w-100 h-100 m-0 p-0">
    <div class="logo flex-grow-0 w-100 m-0 p-0">
      <nav class="navbar navbar-dark bg-dark m-0 p-0">
        <a class="navbar-brand" href="#">
          Phòng kế hoạch
        </a>
      </nav>
    </div>
    <div class="menu-form flex-grow-0 w-100 m-0 p-0">
      <div class="bg-light text-primary">
        <b>Báo biểu</b>
      </div>
      <nav class="navbar navbar-dark bg-secondary m-0 p-1">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link" href="#">
              <i class="fa fa-sign-in-alt mr-1"></i>Biểu 1</a>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">
              <i class="fa fa-sign-in-alt mr-1"></i>Biểu 2</a>
            </a>
          </li>
      </nav>
    </div>
    <div class="menu-report flex-grow-1 w-100 m-0 p-0">
      <div class="bg-light text-primary">
        <b>In ấn</b>
      </div>
      <nav class="navbar navbar-dark bg-secondary m-0 p-1">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link" href="#">
              <i class="fa fa-sign-in-alt mr-1"></i>Biểu 1</a>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">
              <i class="fa fa-sign-in-alt mr-1"></i>Biểu 2</a>
            </a>
          </li>
      </nav>
    </div>
    <div class="flex-grow-0 w-100 m-0 p-0">
      <nav class="navbar navbar-dark bg-dark m-0 p-1">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item">
            {% if current_user %}
            <a class="nav-link" href="#">
              <i class="fa fa-sign-in-alt mr-1"></i>{{ _("Sign in") }}</a>
            </a>
            {% else %}
            <a class="nav-link" href="#">
              <i class="fa fa-sign-out-alt mr-1"></i>{{ _("Sign out") }}</a>
            {% end %}
          </li>
        </ul>
      </nav>
    </div>
  </div>
</div>
{% end %}

{% block app %}
<main class="m-0 p-0 h-100 w-100">
  <input class="col" type="search" v-model="stim" @keyup="tim_keyup"
    placeholder="Tìm ... (không phân biệt chữ hoa hay thường)" />
  <div class="container-fluid" v-if="showotim">
    <div class="row">
      <div class="col border border-primary">
        vung otim {`JSON.stringify(otim)`}
      </div>
      <div class="col-auto">
        <button class="btn" @click="clear_otim">
          <i class="fa fa-trash"></i>
          Xóa lọc
        </button>
      </div>
    </div>
  </div>

  <hr class="border border-dark">
  <div class="thanhtruot">thanh trượt ngang</div>
  <div class="row tieude">
    <div class="col- crud">Act</div>
    <div class="col- mahoso"><b>Mã hồ sơ</b></div>
    <div class="col- sohoso"><b>Số hồ sơ</b></div>
    <div class="col- khachhang"><b>Khách hàng</b></div>
    <div class="col- diachi"><b>Địa chỉ lắp đặt</b></div>

    <div class="col- ngaygan"><b>Ngày gắn</b></div>
    <div class="col- ngayhoancong"><b>Ngày hoàn công</b></div>
    <div class="col- madot"><b>Mã đợt</b></div>
    <div class="col- sodot"><b>Số đợt</b></div>

    <div class="col- thongbao"><b>Thông báo</b></div>
    <div class="col- ghichu"><b>Ghi chú</b></div>
  </div>
  <div class="row noidung" v-for="(item, stt) in ttdl" :key="stt">
    <div v-if="item.hoso.isedit">
      <div class="col- crud">
        <i class="fa fa-save" @click="saveHoso">{`stt + 1`}</i>
        <i class="fa fa-stop-circle" @click="item.hoso.isedit = false">Bỏ</i>
      </div>
      <div class="col- mahoso">{`item.hoso.mahoso`}</div>
      <div class="col- sohoso">{`item.hoso.sohoso`}</div>
      <div class="col- khachhang">{`item.khachhang.khachhang`}</div>
      <div class="col- diachi">{`item.khachhang.diachi`}</div>
      <div class="col- ngaygan">{`item.hoso.ngaygan`}</div>
      <div class="col- ngayhoancong">{`item.hoso.ngayhoancong`}</div>
      <div class="col- madot">{`item.dot.madot`}</div>
      <div class="col- sodot">{`item.dot.sodot`}</div>
      <div class="col- thongbao">{`item.hoso.thongbao`}</div>
      <div class="col- ghichu">{`item.hoso.ghichu`}</div>
    </div>
    <div v-else>
      <div class="col- crud">
        <i class="fa fa-edit" @click=" ">{`stt + 1`}</i>
      </div>
      <div class="col- mahoso">{`item.hoso.mahoso`}</div>
      <div class="col- sohoso">{`item.hoso.sohoso`}</div>
      <div class="col- khachhang">{`item.khachhang.khachhang`}</div>
      <div class="col- diachi">{`item.khachhang.diachi`}</div>
      <div class="col- ngaygan">{`item.hoso.ngaygan`}</div>
      <div class="col- ngayhoancong">{`item.hoso.ngayhoancong`}</div>
      <div class="col- madot">{`item.dot.madot`}</div>
      <div class="col- sodot">{`item.dot.sodot`}</div>
      <div class="col- thongbao">{`item.hoso.thongbao`}</div>
      <div class="col- ghichu">{`item.hoso.ghichu`}</div>
    </div>

  </div>



  <hr class="border border-dark">
  <div class="container-fluid">
    <div> oHoso = {`JSON.stringify(oHoso)`}</div>
    <div> oKhachhang = {`JSON.stringify(oKhachhang)`}</div>
    <div> oDot = {`JSON.stringify(oDot)`}</div>
    <div> ttdl0 = {`JSON.stringify(ttdl0)`}</div>
    <div> info = {`JSON.stringify(info)`}</div>
    <div> ttdl = {`JSON.stringify(ttdl)`}</div>
  </div>
  <hr class="border border-dark">
  <div class="container-fluid">
    <div class="col-auto">
      <button class="btn btn-primary" @click="save_data_test">
        <i class="fa fa-add"></i>
        Add noi dung test
      </button>
    </div>
    <div class="col-auto">
      <button class="btn btn-primary" @click="get_ttdl">
        <i class="fa fa-add"></i>
        Add noi dung get_ttdl
      </button>
    </div>
  </div>
</main>
{% end %}