{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "..\\src\\App.svelte",
    "..\\src\\Khach.svelte"
  ],
  "sourcesContent": [
    "<script>\r\n  import { kho } from \"./stores.js\";\r\n  import Khach from \"./Khach.svelte\";\r\n  import { filterListObj } from \"./utils.js\";\r\n\r\n  const API_URL = \"http://localhost:8888/api1108/\";\r\n  const socket_url = \"ws://localhost:8888/hoso/api1108\";\r\n\r\n  let dsnam = [2020, 2019, 2018, 2017, 2016];\r\n  let namhoso = 2019;\r\n  $kho.tblWidth = 20000;\r\n  $kho.progress = 0;\r\n  $kho.showProgress = true;\r\n  $kho.dskh = [];\r\n\r\n  function xemHoso() {\r\n    let apiurl = API_URL + \"hoso/\";\r\n    axios({\r\n      method: \"get\",\r\n      url: \"http://localhost:8888/api1108/hoso/\",\r\n      responseType: \"json\",\r\n      responseEncoding: \"utf8\",\r\n      onDownloadProgress: progressEvent => {\r\n        let percentCompleted = parseInt(\r\n          Math.round((progressEvent.loaded * 100) / progressEvent.total)\r\n        );\r\n        $kho.progress = percentCompleted;\r\n        console.log(\"$kho.progress=\" + $kho.progress);\r\n      }\r\n    }).then(response => {\r\n      let dulieu = response.data;\r\n      console.log(\"response.data=\" + dulieu);\r\n      if (dulieu !== null || dulieu !== undefined || dulieu !== \"\") {\r\n        $kho.dskh = dulieu.hoso;\r\n        console.log(\"$dulieu.hoso=\" + dulieu.hoso);\r\n        console.log(\"$dulieu.info=\" + dulieu.info);\r\n      }\r\n    });\r\n  }\r\n  // socket\r\n  function nhantinServer() {\r\n    var ws = new WebSocket(socket_url);\r\n    ws.onmessage = function(event) {\r\n      let objjson = JSON.parse(event.data);\r\n      console.log(\"tin tu server: \" + objjson);\r\n      return objjson;\r\n    };\r\n  }\r\n\r\n  function guitinServer(sjson) {\r\n    var ws = new WebSocket(socket_url);\r\n    ws.send(JSON.stringify(sjson));\r\n  }\r\n  $: tincapnhat = JSON.stringify($kho.tinserver);\r\n  //tam dskh\r\n  let dskh = [\r\n    {\r\n      mahoso: \"2019hs001\",\r\n      khachhang: \"Nguyen Van A\",\r\n      sohoso: \"GM01200/19\",\r\n      diachi: \"123 Tran Van Thoi, Q10\",\r\n      maq:'01',\r\n      maqp:'0102',\r\n      mota:'',\r\n      ngaygan: '2019/10/20',\r\n      sodhn: '1232',\r\n      chisodhn:0.00,\r\n      madma:'xxx',\r\n      malotrinh:'112',\r\n      trongai:'',\r\n      tainhap:'',\r\n      taithicong:'',\r\n      hoantien:'',\r\n      lienhe:'',\r\n      hieudhn:'kent'\r\n    },\r\n    {\r\n      mahoso: \"2019hs002\",\r\n      khachhang: \"Pham Van Tuan\",\r\n      diachi: \"625 Tran Van Thoi, Q11\",\r\n      maq:'01',\r\n      maqp:'0102',\r\n      mota:'',\r\n      ngaygan: '2019/10/20',\r\n      sodhn: '1232',\r\n      chisodhn:0.00,\r\n      madma:'xxx',\r\n      malotrinh:'112',\r\n      trongai:'',\r\n      tainhap:'',\r\n      taithicong:'',\r\n      hoantien:'',\r\n      lienhe:'',\r\n      hieudhn:'kent',\r\n      sohoso:''\r\n    },\r\n    {\r\n      mahoso: \"2019hs003\",\r\n      khachhang: \"Tran Van Ty\",\r\n      diachi: \"1243 Tran Van Thoi, Q12\",\r\n      maq:'01',\r\n      maqp:'0102',\r\n      mota:'',\r\n      ngaygan: '2019/10/20',\r\n      sodhn: '1232',\r\n      chisodhn:0.00,\r\n      madma:'xxx',\r\n      malotrinh:'112',\r\n      trongai:'',\r\n      tainhap:'',\r\n      taithicong:'',\r\n      hoantien:'',\r\n      lienhe:'',\r\n      hieudhn:'kent',\r\n      sohoso:''\r\n    },\r\n    {\r\n      mahoso: \"2019hs004\",\r\n      khachhang: \"Nguyen Thi Nhanh\",\r\n      diachi: \"125 Tran Van Thoi, Q12\",\r\n      maq:'01',\r\n      maqp:'0102',\r\n      mota:'',\r\n      ngaygan: '2019/10/20',\r\n      sodhn: '1232',\r\n      chisodhn:0.00,\r\n      madma:'xxx',\r\n      malotrinh:'112',\r\n      trongai:'',\r\n      tainhap:'',\r\n      taithicong:'',\r\n      hoantien:'',\r\n      lienhe:'',\r\n      hieudhn:'kent',\r\n      sohoso:''\r\n    }\r\n  ];\r\n  // tim kiem\r\n  $kho.dskh = dskh;\r\n  let stim = \"\";\r\n  let dstim = [];\r\n  let curdstim = 0;\r\n  function addDsTim(event) {\r\n    if (event.key === \"Enter\" && stim.length > 0) {\r\n      stim = stim.trim();\r\n      let dai = dstim.length;\r\n      let data = [stim];\r\n      for (let i = 0; i < dai; i++) {\r\n        if (dstim[i] !== stim) {\r\n          data.push(dstim[i]);\r\n        }\r\n      }\r\n      dstim = data;\r\n      stim = \"\";\r\n    }\r\n  }\r\n  function xoaDstim() {\r\n    let dai = dstim.length;\r\n    let data = [];\r\n    for (let i = 0; i < dai; i++) {\r\n      if (i !== curdstim) {\r\n        data.push(dstim[i]);\r\n      }\r\n    }\r\n    dstim = data;\r\n  }\r\n  function locNhom(nhom) {\r\n    let l = nhom.length || 0;\r\n    let data = $kho.dskh;\r\n    if (l > 0) {\r\n      for (let i = 0; i < l; i++) {\r\n        let s = nhom[i];\r\n        data = filterListObj(data, s);\r\n      }\r\n    }\r\n    return data;\r\n  }\r\n  $: dsLocNhom = locNhom(dstim);\r\n  $: dsLoc = filterListObj(dsLocNhom, stim);\r\n  let curHoso = 0;\r\n  // phan trang\r\n  // tao scroll y\r\n  let rongbang = 2000;\r\n  let caobang = 500;\r\n  let caotieude = 16;\r\n  $: caonoidung = caobang - caotieude;\r\n  $: $kho.tblWidth = rongbang - 10;\r\n</script>\r\n\r\n<style>\r\n  h3 {\r\n    color: purple;\r\n  }\r\n  tbody {\r\n    display: block;\r\n    overflow-y: auto;\r\n  }\r\n  thead {\r\n    display: table;\r\n    table-layout: fixed;\r\n  }\r\n</style>\r\n\r\n<section>\r\n  <header class=\"container-fluid\">\r\n    <div class=\"row justify-content-center text-primary\">\r\n      <div class=\"col-auto\">\r\n        <h3>DANH SÁCH KHÁCH HÀNG - NHẬN ĐƠN NĂM&nbsp;</h3>\r\n      </div>\r\n      <div class=\"col-auto\">\r\n        <div class=\"input-group\">\r\n          <select class=\"custom-select\" id=\"selectnam\" bind:value={namhoso}>\r\n            {#each dsnam as namlamviec}\r\n              <option value={namlamviec}>{namlamviec}</option>\r\n            {/each}\r\n          </select>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-auto\">\r\n        <button\r\n          class=\"btn btn-outline-primary btn-rounded\"\r\n          type=\"button\"\r\n          on:click={xemHoso}>\r\n          <i class=\"fa fa-sync-alt\" />\r\n        </button>\r\n      </div>\r\n    </div>\r\n    {#if $kho.showProgress}\r\n      <div class=\"row\">\r\n        <div class=\"col\">\r\n          <div class=\"progress\">\r\n            <div\r\n              class=\"progress-bar progress-bar-striped progress-bar-animated\r\n              bg-info\"\r\n              role=\"progressbar\"\r\n              aria-valuenow={$kho.progress}\r\n              aria-valuemin=\"0\"\r\n              aria-valuemax=\"100\"\r\n              style=\"width: {$kho.progress}%\">\r\n              {$kho.progress}%\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    {/if}\r\n    <div>&nbsp;</div>\r\n    <div class=\"row\">\r\n      <div class=\"col border border-primary\">\r\n        <div class=\"row\">\r\n          <div class=\"col\">\r\n            {#each dstim as item, id}\r\n              <button\r\n                type=\"button\"\r\n                class=\"btn btn-outline-info\"\r\n                on:mouseover={() => (curdstim = id)}\r\n                on:click|preventDefault={xoaDstim}>\r\n                {item} - id={id} - cur={curdstim}\r\n              </button>\r\n            {/each}\r\n          </div>\r\n          <div class=\"col-auto\">\r\n            <button class=\"btn\" on:click={() => (dstim = [])}>\r\n              <i class=\"fa fa-trash fa-lg\" />\r\n              Xóa hết\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-3\">\r\n        <input\r\n          class=\"col\"\r\n          type=\"search\"\r\n          bind:value={stim}\r\n          on:keydown={addDsTim}\r\n          placeholder=\"Tìm ... (không phân biệt chữ hoa hay thường)\" />\r\n      </div>\r\n    </div>\r\n    <hr />\r\n  </header>\r\n  <main>\r\n    <div class=\"container-fluid\" bind:clientHeight={caobang}>\r\n      <div class=\"table-responsive\" bind:clientWidth={rongbang}>\r\n        <table class=\"table table-hover\">\r\n          <thead style=\"width:{$kho.tblWidth}px;\" bind:clientHeight={caotieude}>\r\n            <tr>\r\n              <th scope=\"col\">STT</th>\r\n              <th scope=\"col\">Mã hồ sơ</th>\r\n              <th scope=\"col\">Số hồ sơ</th>\r\n              <th scope=\"col\">Khách hàng</th>\r\n              <th scope=\"col\">Địa chỉ</th>\r\n              <th scope=\"col\">Liên hệ</th>\r\n              <th scope=\"col\">Ghi chú</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody style=\"max-height:{caonoidung}px;\">\r\n            {#each dsLoc as khach, id}\r\n              <Khach {...khach} id />\r\n            {/each}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  </main>\r\n  <footer>\r\n    <br />\r\n    <div class=\"row\">\r\n      <div class=\"col-auto\">Tổng số hồ sơ: {$kho.dskh.length}</div>\r\n      <div class=\"col\">\r\n        $kho.hosocapnhat = {JSON.stringify($kho.hosocapnhat)}\r\n      </div>\r\n      <div class=\"col-auto\">\r\n        bạn đang xem hồ sơ thứ {curHoso} trong {dsLoc.length} hồ sơ chọn lọc\r\n      </div>\r\n    </div>\r\n  </footer>\r\n</section>\r\n",
    "<script>\r\n  import { kho } from \"./stores.js\";\r\n  $kho.hosocapnhat = \"\";\r\n  export let id;\r\n  export let mahoso;\r\n  export let sohoso;\r\n  export let khachhang;\r\n  export let diachi;\r\n  export let lienhe;\r\n  export let maq;\r\n  export let maqp;\r\n  export let mota;\r\n  // hoan cong\r\n  export let ngaygan;\r\n  export let sodhn;\r\n  export let hieudhn;\r\n  export let chisodhn;\r\n  export let madma;\r\n  export let malotrinh;\r\n  // pkh\r\n  export let trongai;\r\n  export let tainhap;\r\n  export let taithicong;\r\n  export let hoantien;\r\n\r\n  let isOpen = false;\r\n  let isEdit = false;\r\n\r\n  // socket\r\n  const socket_url = \"ws://localhost:8888/hoso/api1108\";\r\n  var ws = new WebSocket(socket_url);\r\n  function nhantinServer() {\r\n    console.log(\"nhan tin tu server ws.readyState=\" + ws.readyState);\r\n    if (ws.readyState > 1) {\r\n      ws = new WebSocket(socket_url);\r\n    }\r\n    ws.onmessage = function(event) {\r\n      let tt = JSON.parse(event.data);\r\n      console.log(\r\n        \"tin tu server: 'tin'=\" + JSON.stringify(tt));\r\n      if (tt[\"tin\"] === \"capnhat\") {\r\n        $kho.hosocapnhat = tt[\"goi\"];\r\n      }\r\n    };\r\n  }\r\n\r\n  function guitinServer(sjson) {\r\n    console.log(\"gui tin ws.readyState=\" + ws.readyState);\r\n    if (ws.readyState > 1) {\r\n      ws = new WebSocket(socket_url);\r\n    }\r\n    ws.send(JSON.stringify(sjson));\r\n  }\r\n\r\n  function suaHoso() {\r\n    let goi = {};\r\n    goi.mahoso = mahoso;\r\n    goi.sohoso = sohoso;\r\n    goi.khachhang = khachhang;\r\n    goi.diachi = diachi;\r\n    let tincangui = { tin: \"capnhat\", goi: goi };\r\n    guitinServer(tincangui);\r\n  }\r\n  function showHoso() {}\r\n  $: updateHoso = nhantinServer();\r\n</script>\r\n\r\n<style>\r\n  tr {\r\n    display: table;\r\n    table-layout: fixed;\r\n  }\r\n</style>\r\n\r\n<tr style=\"width:{$kho.tblWidth}px;\">\r\n  {#if isEdit}\r\n    <th scope=\"row\">\r\n      <button\r\n        class=\"btn btn-outline-secondary\"\r\n        type=\"button\"\r\n        on:click={() => {\r\n          isEdit = false;\r\n          suaHoso();\r\n        }}>\r\n        <i class=\"fa fa-save\" />\r\n        {id + 1}\r\n      </button>\r\n    </th>\r\n    <td>{mahoso}{$kho.tblWidth}</td>\r\n    <td>\r\n      <input bind:value={sohoso} />\r\n    </td>\r\n    <td>\r\n      <input bind:value={khachhang} />\r\n    </td>\r\n    <td>\r\n      <input bind:value={diachi} />\r\n    </td>\r\n    <td>\r\n      <input bind:value={lienhe} />\r\n    </td>\r\n    <td>\r\n      <input bind:value={mota} />\r\n    </td>\r\n  {:else}\r\n    <th scope=\"row\">\r\n      <button\r\n        class=\"btn btn-outline-secondary\"\r\n        type=\"button\"\r\n        on:click={() => (isEdit = true)}>\r\n        <i class=\"fa fa-edit\" />\r\n        {id + 1}\r\n      </button>\r\n    </th>\r\n    <td>{mahoso}</td>\r\n    <td>{sohoso}</td>\r\n    <td>{khachhang}</td>\r\n    <td>{diachi}</td>\r\n    <td>{lienhe}</td>\r\n    <td>{mota}</td>\r\n  {/if}\r\n</tr>\r\n"
  ],
  "names": [],
  "mappings": "AA8LE,EAAE,eAAC,CAAC,AACF,KAAK,CAAE,MAAM,AACf,CAAC,AACD,KAAK,eAAC,CAAC,AACL,OAAO,CAAE,KAAK,CACd,UAAU,CAAE,IAAI,AAClB,CAAC,AACD,KAAK,eAAC,CAAC,AACL,OAAO,CAAE,KAAK,CACd,YAAY,CAAE,KAAK,AACrB,CAAC;ACpID,EAAE,eAAC,CAAC,AACF,OAAO,CAAE,KAAK,CACd,YAAY,CAAE,KAAK,AACrB,CAAC"
}